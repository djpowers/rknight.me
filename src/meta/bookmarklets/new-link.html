<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
      html,body,div { margin: 0; padding: 0; font: normal 16px/24px Helvetica Neue, Helvetica, sans-serif; color: #333; }
      #main { max-width: 630px; margin: 3em auto; }
      .bookmarklet { display: inline-block; padding: .5em 1em; color: #fff; background: #50dcf3; border-radius: 4px; text-decoration: none; }
      a { color: #50dcf3; }
      .dim { color: #999; }
    </style>
  </head>
  <body>
    <div id="main">
      <h1>+Link</h1>
      <p>
        Drag this button to your bookmarks bar to save it as a bookmarklet:
      </p>
      <p>
        <a class="bookmarklet" href="javascript:(function()%7Bconst%20slugify%3De%3D%3E%7Blet%20n%3De.toString()%3Breturn%20console.log(%601%3A%20%24%7Bn%7D%60)%2Cn%3Dn.replaceAll(%22%2F%22%2C%22%20%22)%2Cconsole.log(%602%3A%20%24%7Bn%7D%60)%2Cn%3Dn.normalize(%22NFD%22)%2Cconsole.log(%603%3A%20%24%7Bn%7D%60)%2Cn%3Dn.replace(%2F%5B%5Cu0300-%5Cu036f%5D%2Fg%2C%22%22)%2Cconsole.log(%604%3A%20%24%7Bn%7D%60)%2Cn%3Dn.toLowerCase()%2Cconsole.log(%605%3A%20%24%7Bn%7D%60)%2Cn%3Dn.replace(%2F%5Cs%2B%2Fg%2C%22%20%22)%2Cconsole.log(%606%3A%20%24%7Bn%7D%60)%2Cn%3Dn.replace(%2F%5B%5E%5Cw%20%5D%2B%2Fg%2C%22%20%22)%2Cconsole.log(%607%3A%20%24%7Bn%7D%60)%2Cn%3Dn.trim()%2Cconsole.log(%608%3A%20%24%7Bn%7D%60)%2Cn%3Dn.replace(%2F%20%2B%2Fg%2C%22-%22)%2Cconsole.log(%609%3A%20%24%7Bn%7D%60)%2Cn%7D%3Blet%20pageTitle%3Dwindow.document.title%2ClinkSelection%3D%22getSelection%22in%20window%3Fwindow.getSelection().toString().trim()%3A%22%22%2ClinkContent%3DlinkSelection%7C%7Cwindow.document.querySelector(%22head%20meta%5Bname%3Ddescription%20i%5D%22)%3F.content.trim()%7C%7Cwindow.document.querySelector(%22main%20p%22)%3F.textContent.trim()%7C%7Cwindow.document.querySelector(%22article%20p%22)%3F.textContent.trim()%7C%7Cwindow.document.querySelector(%22p%22)%3F.textContent.trim()%2ClinkUrl%3Dwindow.location.href%3Bconst%20domain%3Dwindow.location.host%2CauthorName%3Ddocument.querySelector(%22.p-name%22)%3F.innerText%2CmastodonAccounts%3DArray.from(document.querySelectorAll('%5Brel%3D%22me%22%5D')).filter((e%3D%3Ee.href.includes(%22%40%22))).map((e%3D%3Ee.href)).join(%22%2C%20%22)%2CFEED_SELECTORS%3D%5B'link%5Btype%3D%22application%2Frss%2Bxml%22%5D'%2C'link%5Btype%3D%22application%2Fatom%2Bxml%22%5D'%2C'link%5Btype%3D%22application%2Fjson%22%5D'%5D%3Blet%20title%3Dwindow.prompt(%22Title%20of%20the%20link%3F%22%2CpageTitle)%3Bconst%20run%3De%3D%3E%7Blet%20n%3Dnull%3Bif(FEED_SELECTORS.forEach((e%3D%3E%7Bif(n)return%3Bconst%20t%3Ddocument.querySelector(e)%3Bt%26%26(n%3Dt.href)%7D))%2Cnull!%3D%3Dtitle)%7Blet%20t%3Dwindow.prompt(%22Slug%20of%20the%20link%3F%22%2Cslugify(title))%3Bif(null!%3D%3Dt)%7Bconst%20o%3D(new%20Date).toISOString()%2Cl%3D(new%20Date).getFullYear()%3Blet%20i%3D%60---%5Cntitle%3A%20%22%24%7Btitle%7D%22%5Cnpermalink%3A%20%2Flinks%2F%24%7Bt%7D%2Findex.html%5Cnlink%3A%20%24%7BlinkUrl%7D%5Cndate%3A%20%24%7Bo%7D%5Cnauthor%3A%20%24%7Bdomain%7D%5Cn---%5Cn%5Cn%24%7BlinkContent%3F%60%3E%20%24%7BlinkContent.replaceAll(%22%5Cn%22%2C%22%5Cn%3E%20%22)%7D%60%3A%22%22%7D%5Cn%60%3Be%5Bdomain%5D%7C%7Cwindow.prompt(%22New%20author%20needed%22%2CJSON.stringify(%7B%5Bdomain%5D%3A%7Bname%3AauthorName%2Cmastodon%3AmastodonAccounts%2Cfeed%3An%7D%7D%2Cnull%2C2))%3Blet%20r%3D%60https%3A%2F%2Fgithub.com%2Frknightuk%2Frknight.me%2Fnew%2Fmaster%2F%3Ffilename%3D%24%7B%60src%2Flinks%2F%24%7Bl%7D%2F%24%7Bo.slice(0%2C10)%7D-%24%7Bt%7D.md%60%7D%26value%3D%24%7BencodeURIComponent(i)%7D%26message%3D%24%7BencodeURIComponent(%60New%20link%3A%20%24%7Btitle%7D%60)%7D%60%3Bwindow.open(%22https%3A%2F%2Fgithub.com%2Frknightuk%2Frknight.me%2Fedit%2Fmaster%2Fsrc%2F_data%2Fpeople.json%22)%2Cwindow.open(r)%7D%7D%7D%3Bfetch(%22https%3A%2F%2Frobb.paste.lol%2Fpeople.json%2Fraw%22).then((e%3D%3Ee.json())).then((e%3D%3E%7Brun(e)%7D))%3B%7D)()">+Link</a>
      </p>
      
      <p class="dim">This page was created with the <a href="https://github.com/mrcoles/bookmarklet">bookmarklet</a> npm library.</p>
    </div>
  </body>
</html>
